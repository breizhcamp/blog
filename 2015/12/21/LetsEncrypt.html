<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Un peu de sécurité &#8211; Breizhcamp</title>
<meta name="description" content="Le CFP est exposé en HTTPS grâce à Let's Encrypt">
<meta name="keywords" content="blog, breizhcamp, sécurité, https">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.breizhcamp.org//images/">
<meta name="twitter:title" content="Un peu de sécurité">
<meta name="twitter:description" content="Le CFP est exposé en HTTPS grâce à Let's Encrypt">
<meta name="twitter:creator" content="@breizhcamp">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Un peu de sécurité">
<meta property="og:description" content="Le CFP est exposé en HTTPS grâce à Let's Encrypt">
<meta property="og:url" content="http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html">
<meta property="og:site_name" content="Breizhcamp">





<link rel="canonical" href="http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html">
<link href="http://blog.breizhcamp.org//feed.xml" type="application/atom+xml" rel="alternate" title="Breizhcamp Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.breizhcamp.org//assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://blog.breizhcamp.org//assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.breizhcamp.org//favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.breizhcamp.org//favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.breizhcamp.org//images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.breizhcamp.org//images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.breizhcamp.org//images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.breizhcamp.org//images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post" >

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://blog.breizhcamp.org//">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://blog.breizhcamp.org//images/avatar.png" alt="Breizhcamp photo" class="author-photo">
					<h4>Breizhcamp</h4>
					<p>La conférence des développeurs du grand ouest</p>
				</li>
				<li><a href="http://blog.breizhcamp.org//about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:team@breizhcamp.org"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="http://twitter.com/breizhcamp"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="http://blog.breizhcamp.org//posts/">All Posts</a></li>
				<li><a href="http://blog.breizhcamp.org//tags/">All Tags</a></li>
			</ul>
		</li>
		
	    
	        
	        
	    <li><a href="http://www.breizhcamp.org/" target="_blank">breizhcamp.org</a></li>
	  
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->




<div id="main" role="main">
  <article class="hentry">
    <header class="header-title">
      <div class="header-title-wrap">
        
          <h1 class="entry-title"><a href="http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html" rel="bookmark" title="Un peu de sécurité">Un peu de sécurité</a></h1>
        
        <h2><span class="entry-date date published"><time datetime="2015-12-21T17:39:38+01:00">December 21, 2015</time></span></h2>
        
      </div><!-- /.header-title-wrap -->
    </header>
    <div class="entry-content">
      <p>Depuis le 3 décembre, <a href="https://letsencrypt.org/">Let’s Encrypt</a> est passée dans sa phase d’Open Beta.
Nous avons donc décidé d’en profiter pour exposer le <a href="https://cfp.breizhcamp.org">CFP</a> en HTTPS.</p>

<h2 id="prambule">Préambule</h2>

<p>Avant d’expliquer les étapes techniques de mise en œuvre, arrêtons nous un instant sur Let’s Encrypt : il s’agit d’une autorité de certification libre qui apporte la possibilité d’obtenir des certificats X.509 pour le chiffrement TLS.
La nouveauté réside principalement dans la combinaison de 3 éléments :
- Le service est gratuit. Il suffit de “posséder” un nom de domaine pour pouvoir l’utiliser.
- Le service est automatisable, notamment grâce à l’utilisation du protocole <a href="https://en.wikipedia.org/wiki/Automated_Certificate_Management_Environment">ACME</a> : Automated Certificate Management Environment.
- Le service est opéré par un groupement d’intérêt public, <a href="https://letsencrypt.org/isrg/">l’ISRP</a> : Internet Security Research Group, ayant pour but une gouverance ouverte et transparente.</p>

<p>Il devient donc possible d’obtenir automatiquement et gratuitement des certificats émis par une autorité de certification en laquelle on peut <em>a priori</em> avoir confiance, ce qui représente une belle avancée pour la sécurité sur Internet.</p>

<h2 id="mise-en-uvre">Mise en œuvre</h2>

<p>Passons maintenant au déploiement du certificat sur le CFP du Breizhcamp. Ce déploiement va se dérouler en deux étapes : la génération du certificat (et des éléments nécessaires à son utilisation), et la mise en place de ce certificat dans l’application.
Je ne vais pour le moment vous parler que de la première partie, la génération du certificat. </p>

<p>Let’s Encrypt fournit un <a href="https://github.com/letsencrypt/letsencrypt">client en python</a> permettant l’interaction avec son autorité de certification. Bien que ce client ne soit pas parfait (n’oublions pas qu’il s’agit encore d’une Beta), nous allons quand même nous baser sur lui pour l’obtention du certificat.
Ce client nécessite notamment que le port 80 soit “disponible” pour les échanges dans le cadre du protocole ACME, et il a besoin d’être exécuté sur la machine portant le nom de domaine pour lequel on souhaite un certificat. 
J’ai donc choisi d’exécuter le client dans un conteneur Docker sur le serveur de production du CFP (qui n’était pas encore ouvert à l’époque, je me suis donc autorisé l’interruption de service générée par le fait d’arrêter le CFP le temps de générer le certificat).</p>

<p>Après avoir arrêté le conteneur du CFP, j’ai donc lancé un nouveau conteneur Ubuntu en prenant le soin d’exposer le port 80 : </p>

<p><code>
docker run -ti -p 80:80 ubuntu /bin/bash
</code></p>

<p>Puis j’ai installé et exécuté le client Let’s encrypt dans mon conteneur. Le client est exécuté en mode “standalone” et “certonly” (il lance un serveur HTTP sur le port 80, et génères le certificats sans chercher à les déployer) : </p>

<p><code>
apt-get update
</code>
<code>
apt-get install -y git
</code>
<code>
git clone https://github.com/letsencrypt/letsencrypt
</code>
<code>
cd letsencrypt
</code>
<code>
./letsencrypt-auto --help all
</code>
<code>
./letsencrypt-auto certonly --standalone --email contact@breizhcamp.org -d cfp.breizhcamp.org
</code>
Et voilà, le dossier <code>/etc/letsencrypt/</code> contient maintenant votre certificat, la clé privée associée, et la chaîne de certification complète. Il ne reste plus qu’à l’utiliser dans votre serveur Web préféré (ou, comme nous l’expliquerons dans un autre article, dans votre application Spring Boot).</p>


      <footer class="entry-meta">
        <span class="entry-tags"><a href="http://blog.breizhcamp.org//tags/#blog" title="Pages tagged blog" class="tag"><span class="term">blog</span></a><a href="http://blog.breizhcamp.org//tags/#breizhcamp" title="Pages tagged breizhcamp" class="tag"><span class="term">breizhcamp</span></a><a href="http://blog.breizhcamp.org//tags/#sécurité" title="Pages tagged sécurité" class="tag"><span class="term">sécurité</span></a><a href="http://blog.breizhcamp.org//tags/#https" title="Pages tagged https" class="tag"><span class="term">https</span></a></span>
        
        <div class="social-share">
  <ul class="socialcount socialcount-small inline-list">
    <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html" title="Share on Facebook"><span class="count"><i class="fa fa-facebook-square"></i> Like</span></a></li>
    <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html" title="Share on Twitter"><span class="count"><i class="fa fa-twitter-square"></i> Tweet</span></a></li>
    <li class="googleplus"><a href="https://plus.google.com/share?url=http://blog.breizhcamp.org//2015/12/21/LetsEncrypt.html" title="Share on Google Plus"><span class="count"><i class="fa fa-google-plus-square"></i> +1</span></a></li>
  </ul>
</div><!-- /.social-share -->
      </footer>
    </div><!-- /.entry-content -->
    <section id="disqus_thread"></section><!-- /#disqus_thread -->
    <div class="read-more">
  
    <div class="read-more-header">
      <a href="http://blog.breizhcamp.org//2015/11/22/Concours.html" class="read-more-btn">Read More</a>
    </div><!-- /.read-more-header -->
    <div class="read-more-content">
      <h3><a href="http://blog.breizhcamp.org//2015/11/22/Concours.html" title="Concours">Concours</a></h3>
      <p>Gagnez votre place au BreizhCamp 2016. <a href="http://blog.breizhcamp.org//2015/11/22/Concours.html">Continue reading</a></p>
    </div><!-- /.read-more-content -->
  
  <div class="read-more-list">
    
      <div class="list-item">
        <h4><a href="http://blog.breizhcamp.org//2015/11/20/Youtube.html" title="Youtube">Youtube</a></h4>
        <span>Published on November 20, 2015</span>
      </div><!-- /.list-item -->
    
      <div class="list-item">
        <h4><a href="http://blog.breizhcamp.org//2015/10/01/Gogogo.html" title="Go, Go, Go">Go, Go, Go</a></h4>
        <span>Published on October 01, 2015</span>
      </div><!-- /.list-item -->
    
  </div><!-- /.read-more-list -->
</div><!-- /.read-more -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2015 Breizhcamp. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.breizhcamp.org//assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.breizhcamp.org//assets/js/scripts.min.js"></script>




    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'breizhcampblog'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	        

</body>
</html>
